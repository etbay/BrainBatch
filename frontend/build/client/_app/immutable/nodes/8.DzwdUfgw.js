import"../chunks/DsnmJJEf.js";import{a_ as te,l as r,D as ee,ab as qt,aa as Jt,a$ as bt,U as ae,aV as re,aL as se,b0 as oe,i as ht,p as ie,f as H,s as M,a as Q,t as q,b as _,c as ne,b1 as ce,$ as le,d as N,aY as x,r as P,aZ as at,aX as gt,ad as _t}from"../chunks/C7H14__D.js";import{o as de,d as ue,e as fe,s as V}from"../chunks/CqFkhK-z.js";import{i as K}from"../chunks/-RQBovE-.js";import{e as rt,i as ve}from"../chunks/CD2-qF9y.js";import{h as me}from"../chunks/Doj5kpS1.js";import{r as ye,a as xt,s as wt}from"../chunks/CoNfMqP3.js";import{t as pe,c as be}from"../chunks/BRzKQYUk.js";import{p as he}from"../chunks/WavmjKSR.js";import{i as ge,a as _e,b as xe,c as we}from"../chunks/BbPlUrqJ.js";function ke(t){let e=0,i=ee(0),c;return()=>{te()&&(r(i),qt(()=>(e===0&&(c=Jt(()=>t(()=>bt(i)))),e+=1,()=>{ae(()=>{e-=1,e===0&&(c?.(),c=void 0,bt(i))})})))}}function kt(t,e,i){re(()=>{var c=Jt(()=>e(t,i?.())||{});if(i&&c?.update){var o=!1,l={};qt(()=>{var d=i();se(d),o&&oe(l,d)&&(l=d,c.update(d))}),o=!0}if(c?.destroy)return()=>c.destroy()})}function G(t,e,i,c,o,l){var d=t.__className;if(ht||d!==i||d===void 0){var f=pe(i,c,l);(!ht||f!==t.getAttribute("class"))&&(f==null?t.removeAttribute("class"):t.className=f),t.__className=i}else if(l&&o!==l)for(var p in l){var z=!!l[p];(o==null||z!==!!o[p])&&t.classList.toggle(p,z)}return l}class Ae{#t;#e;constructor(e,i){this.#t=e,this.#e=ke(i)}get current(){return this.#e(),this.#t()}}const Pe=/\(.+\)/,ze=new Set(["all","print","screen","and","or","not","only"]);class Se extends Ae{constructor(e,i){let c=Pe.test(e)||e.split(/[\s,]+/).some(l=>ze.has(l.trim()))?e:`(${e})`;const o=window.matchMedia(c);super(()=>o.matches,l=>de(o,"change",l))}}function Ee(t){const e=JSON.parse(t);return e.data&&(e.data=xe(e.data,we.decoders)),e}function ct(t){return HTMLElement.prototype.cloneNode.call(t)}function Le(t,e=()=>{}){const i=async({action:o,result:l,reset:d=!0,invalidateAll:f=!0})=>{l.type==="success"&&(d&&HTMLFormElement.prototype.reset.call(t),f&&await ge()),(location.origin+location.pathname===o.origin+o.pathname||l.type==="redirect"||l.type==="error")&&await _e(l)};async function c(o){if((o.submitter?.hasAttribute("formmethod")?o.submitter.formMethod:ct(t).method)!=="post")return;o.preventDefault();const d=new URL(o.submitter?.hasAttribute("formaction")?o.submitter.formAction:ct(t).action),f=o.submitter?.hasAttribute("formenctype")?o.submitter.formEnctype:ct(t).enctype,p=new FormData(t),z=o.submitter?.getAttribute("name");z&&p.append(z,o.submitter?.getAttribute("value")??"");const O=new AbortController;let D=!1;const S=await e({action:d,cancel:()=>D=!0,controller:O,formData:p,formElement:t,submitter:o.submitter})??i;if(D)return;let w;try{const k=new Headers({accept:"application/json","x-sveltekit-action":"true"});f!=="multipart/form-data"&&k.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(f)?f:"application/x-www-form-urlencoded");const J=f==="multipart/form-data"?p:new URLSearchParams(p),C=await fetch(d,{method:"POST",headers:k,cache:"no-store",body:J,signal:O.signal});w=Ee(await C.text()),w.type==="error"&&(w.status=C.status)}catch(k){if(k?.name==="AbortError")return;w={type:"error",error:k}}await S({action:d,formData:p,formElement:t,update:k=>i({action:d,result:w,reset:k?.reset,invalidateAll:k?.invalidateAll}),result:w})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",c),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",c)}}}var At="mz3PUW_p",Pt=["#FFC700","#FF0000","#2E3191","#41BBC7"],zt=3500,St=.5,Et=150,Lt="mix",Wt=12,Mt="",Ut=!0,Ht=800,Tt=1600;function We(t,e={}){let{colors:i=Pt,duration:c=zt,force:o=St,particleCount:l=Et,particleShape:d=Lt,particleSize:f=Wt,particleClass:p=Mt,destroyAfterDone:z=Ut,stageHeight:O=Ht,stageWidth:D=Tt}=e;(function(u){if(document.querySelector("style[data-neoconfetti]"))return;const m=lt("style");m.dataset.neoconfetti="",m.textContent=u,dt(document.head,m)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),t.classList.add("mz3PUW_c"),t.style.setProperty("--sh",O+"px");let T=[],S=[];const w=()=>X(U()*(Ce-1)),k=(u,m)=>d!=="rectangles"&&(u==="circles"||Ne(m));function J(u,m){const W=w(),s=k(d,W),a=(h,g)=>u.style.setProperty(h,g+"");a("--xlp",ut(st(Ft(m,90)-180),0,180,-D/2,D/2)+"px"),a("--dc",c-X(1e3*U())+"ms");const n=U()<Ue?I(U()*He,2):0;a("--x1",n),a("--x2",-1*n),a("--x3",n),a("--x4",I(st(ut(st(Ft(m,90)-180),0,180,-1,1)),4)),a("--y1",I(U()*Nt,4)),a("--y2",I(U()*o*(Rt()?1:-1),4)),a("--y3",Nt),a("--y4",I(Te(ut(st(m-180),0,180,o,-o),0),4)),a("--w",(s?f:X(4*U())+f/2)+"px"),a("--h",(s?f:X(2*U())+f)+"px");const y=W.toString(2).padStart(3,"0").split("");a("--hr",y.map((h=>+h/2+"")).join(" ")),a("--r",y.join(" ")),a("--rd",I(U()*(Me-Ct)+Ct)+"ms"),a("--br",s?"50%":0)}let C;function Y(){t.innerHTML="",clearTimeout(C),T=Dt(l,i),S=(function(u,m=[],W){const s=[];for(const{color:a}of m){const n=lt("div");n.className=`${At} ${W}`,n.style.setProperty("--bgc",a);const y=lt("div");dt(n,y),dt(u,n),s.push(n)}return s})(t,T,p);for(const[u,m]of Ot(S))J(m,T[+u].degree);C=setTimeout((()=>{z&&(t.innerHTML="")}),c)}return Y(),{update(u){const m=u.particleCount??Et,W=u.particleShape??Lt,s=u.particleSize??Wt,a=u.particleClass??Mt,n=u.colors??Pt,y=u.stageHeight??Ht,h=u.duration??zt,g=u.force??St,v=u.stageWidth??Tt,E=u.destroyAfterDone??Ut;T=Dt(m,n);let A=!1;if(m===l){S=Array.from(t.querySelectorAll(`.${At}`));for(const[j,{color:L}]of Ot(T)){const b=S[+j];JSON.stringify(i)!==JSON.stringify(n)&&b.style.setProperty("--bgc",L),W!==d&&b.style.setProperty("--br",k(W,w())?"50%":"0"),a!==p&&(p&&b.classList.remove(p),a&&b.classList.add(a))}}else A=!0;z&&!E&&clearTimeout(C),t.style.setProperty("--sh",y+"px"),c=h,i=n,o=g,l=m,d=W,f=s,p=a,z=E,O=y,D=v,A&&Y()},destroy(){t.innerHTML="",clearTimeout(C)}}}var Ct=200,Me=800,Ue=.1,He=.3,Nt=.5,st=Math.abs,U=Math.random,X=Math.round,Te=Math.max,lt=t=>document.createElement(t),dt=(t,e)=>t.appendChild(e),Dt=(t,e)=>Array.from({length:t},((i,c)=>({color:e[c%e.length],degree:360*c/t}))),I=(t,e=2)=>X((t+Number.EPSILON)*10**e)/10**e,ut=(t,e,i,c,o)=>(t-e)*(o-c)/(i-e)+c,Ft=(t,e)=>t+e>360?t+e-360:t+e,Rt=()=>U()>.5,Ot=Object.entries,Ce=6,Ne=t=>t!==1&&Rt();function jt(t,e,i){t.preventDefault();const c=t.target.getAttribute("data-key");c==="backspace"?(_t(e,r(e).slice(0,-1)),i()?.badGuess&&i(i().badGuess=!1,!0)):r(e).length<5&&_t(e,r(e)+c)}var De=H('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-115oxdy"/>'),Fe=H('<div> <span class="visually-hidden svelte-115oxdy"><!></span> <input name="guess" type="hidden" class="svelte-115oxdy"/></div>'),Oe=H('<h2 class="visually-hidden svelte-115oxdy"> </h2> <div></div>',1),je=H('<p class="svelte-115oxdy"> </p>'),qe=H('<!> <button data-key="enter" class="restart selected svelte-115oxdy" formaction="?/restart"> </button>',1),Je=H('<button formaction="?/update" name="key"> </button>'),Re=H('<div class="row svelte-115oxdy"></div>'),Be=H('<div class="keyboard svelte-115oxdy"><button data-key="enter">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-115oxdy">back</button> <!></div>'),Ke=H('<div style="position: absolute; left: 50%; top: 30%" class="svelte-115oxdy"></div>'),Ie=H('<h1 class="visually-hidden svelte-115oxdy">Sverdle</h1> <form method="post" action="?/enter" class="svelte-115oxdy"><a class="how-to-play svelte-115oxdy" href="/sverdle/how-to-play">How to play</a> <div></div> <div class="controls svelte-115oxdy"><!></div></form> <!>',1);function ra(t,e){ie(e,!0);let i=he(e,"form",15);const c=new Se("(prefers-reduced-motion: reduce)");let o=x(()=>e.data.answers.at(-1)==="xxxxx"),l=x(()=>r(o)?-1:e.data.answers.length),d=x(()=>e.data.guesses[r(l)]||""),f=x(()=>r(d).length===5);const p=x(()=>{let s={},a={};return e.data.answers.forEach((n,y)=>{const h=e.data.guesses[y];for(let g=0;g<5;g+=1){const v=h[g];n[g]==="x"?(s[v]="exact",a[v]="correct"):s[v]||(s[v]=n[g]==="c"?"close":"missing",a[v]=n[g]==="c"?"present":"absent")}}),{classnames:s,description:a}}),z=x(()=>r(p).classnames),O=x(()=>r(p).description);function D(s){s.metaKey||s.key==="Enter"&&!r(f)||document.querySelector(`[data-key="${s.key}" i]`)?.dispatchEvent(new MouseEvent("click",{cancelable:!0,bubbles:!0}))}var T=Ie();fe("keydown",ce,D),me(s=>{var a=De();le.title="Sverdle",_(s,a)});var S=M(Q(T),2),w=M(N(S),2);let k;rt(w,20,()=>Array.from(Array(6).keys()),s=>s,(s,a)=>{const n=x(()=>a===r(l));var y=Oe(),h=Q(y),g=N(h);P(h);var v=M(h,2);let E;rt(v,20,()=>Array.from(Array(5).keys()),A=>A,(A,j)=>{const L=x(()=>r(n)?r(d):e.data.guesses[a]),b=x(()=>e.data.answers[a]?.[j]),Z=x(()=>r(L)?.[j]??""),Bt=x(()=>r(n)&&j===r(L).length),ft=x(()=>r(b)==="x"),vt=x(()=>r(b)==="c"),mt=x(()=>r(b)==="_");var $=Fe();let yt;var pt=N($),ot=M(pt),Kt=N(ot);{var It=F=>{var tt=at("(correct)");_(F,tt)},Qt=F=>{var tt=gt(),Vt=Q(tt);{var Gt=R=>{var et=at("(present)");_(R,et)},Xt=R=>{var et=gt(),Yt=Q(et);{var Zt=B=>{var nt=at("(absent)");_(B,nt)},$t=B=>{var nt=at("empty");_(B,nt)};K(Yt,B=>{r(mt)?B(Zt):B($t,!1)},!0)}_(R,et)};K(Vt,R=>{r(vt)?R(Gt):R(Xt,!1)},!0)}_(F,tt)};K(Kt,F=>{r(ft)?F(It):F(Qt,!1)})}P(ot);var it=M(ot,2);ye(it),P($),q(F=>{yt=G($,1,"letter svelte-115oxdy",null,yt,F),V(pt,`${r(Z)??""} `),it.disabled=!r(n),xt(it,r(Z))},[()=>({exact:r(ft),close:r(vt),missing:r(mt),selected:r(Bt)})]),_(A,$)}),P(v),q(A=>{V(g,`Row ${a+1}`),E=G(v,1,"row svelte-115oxdy",null,E,A)},[()=>({current:r(n)})]),_(s,y)}),P(w);var J=M(w,2),C=N(J);{var Y=s=>{var a=qe(),n=Q(a);{var y=v=>{var E=je(),A=N(E);P(E),q(()=>V(A,`the answer was "${e.data.answer??""}"`)),_(v,E)};K(n,v=>{!r(o)&&e.data.answer&&v(y)})}var h=M(n,2),g=N(h);P(h),q(()=>V(g,`${r(o)?"you won :)":"game over :("} play again?`)),_(s,a)},u=s=>{var a=Be(),n=N(a);let y;var h=M(n,2);h.__click=[jt,d,i];var g=M(h,2);rt(g,16,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],v=>v,(v,E)=>{var A=Re();rt(A,21,()=>E,ve,(j,L)=>{var b=Je();b.__click=[jt,d,i];var Z=N(b,!0);P(b),q(()=>{wt(b,"data-key",r(L)),G(b,1,be(r(z)[r(L)]),"svelte-115oxdy"),b.disabled=r(f),xt(b,r(L)),wt(b,"aria-label",`${r(L)??""} ${(r(O)[r(L)]||"")??""}`),V(Z,r(L))}),_(j,b)}),P(A),_(v,A)}),P(a),q(v=>{n.disabled=!r(f),y=G(n,1,"svelte-115oxdy",null,y,v)},[()=>({selected:r(f)})]),_(s,a)};K(C,s=>{r(o)||e.data.answers.length>=6?s(Y):s(u,!1)})}P(J),P(S),kt(S,(s,a)=>Le?.(s,a),()=>()=>({update:s})=>{s({reset:!1})});var m=M(S,2);{var W=s=>{var a=Ke();kt(a,(n,y)=>We?.(n,y),()=>({particleCount:c.current?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),_(s,a)};K(m,s=>{r(o)&&s(W)})}q(s=>k=G(w,1,"grid svelte-115oxdy",null,k,s),[()=>({playing:!r(o),"bad-guess":i()?.badGuess})]),_(t,T),ne()}ue(["click"]);export{ra as component};
